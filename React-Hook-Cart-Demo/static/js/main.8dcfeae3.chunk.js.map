{"version":3,"sources":["components/foodItem/index.jsx","Hooks/useCountChanger.js","components/cart/index.jsx","dataConfig.js","Hooks/useChecked.js","pages/home/index.jsx","Hooks/useFoodStatusMap.js","index.js"],"names":["React","memo","props","foodData","foodStatusDispatch","Error","initCount","useReducer","state","action","type","handleAddFood","handleReduceFood","count","countDispatch","useCountChanger","className","console","log","src","littleImageUrl","alt","spuName","spuDesc","sale","currentPrice","onClick","alert","payload","food","prevProps","nextProps","JSON","stringify","foodMap","foodIds","Object","keys","foodNums","totalPrice","reduce","prevSum","next","nextFood","parseFloat","toFixed","foodList","spuId","init","initCheckedMap","i","checked","FoodArrayToMap","list","foodMapData","forEach","assign","Home","initFoodMap","foodStateChangeReducer","deleteIds","checkAll","setFoodMapData","newState","parse","id","useFoodStatusMap","foodDataConfig","checkedMap","checkedDispatch","useChecked","isCheckAll","length","map","foodId","index","key","onChange","e","handleChecked","target","htmlFor","filterFoods","push","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8dcfeae3.chunk.js","sourcesContent":["import React from 'react'\nimport useCountChanger from '../../Hooks/useCountChanger.js'\nimport './index.less'\n\nfunction areEqual(prevProps, nextProps) {\n  return JSON.stringify(prevProps.food) === JSON.stringify(nextProps.food)\n}\n\nexport default React.memo(function Food(props) {\n  const { foodData, foodStatusDispatch } = props\n\n  if (!foodData) {\n    throw new Error('check failed prop:foodData.')\n  }\n  const { count, countDispatch } = useCountChanger()\n\n  function handleAddFood() {\n    countDispatch({ type: 'add' })\n    foodStatusDispatch({ type: 'add', payload: { food: foodData } })\n  }\n\n  function handleReduceFood() {\n    if (count < 1) {\n      alert('商品数量不能小于0')\n    } else {\n      countDispatch({ type: 'reduce' })\n      foodStatusDispatch({ type: 'reduce', payload: { food: foodData } })\n    }\n  }\n\n  return (\n    <div className='food-item'>\n      {console.log('render food item')}\n      <img className='food-pic' src={foodData.littleImageUrl} alt='' />\n      <div className='food-info'>\n        <p className='food-spu-dame'>{foodData.spuName}</p>\n        <p className='food-spu-desc'>{foodData.spuDesc}</p>\n        <p className='food-sale'>月售{foodData.sale}</p>\n        <p className='foood-current-price'>¥ {foodData.currentPrice}</p>\n      </div>\n      <div className='count-control'>\n        {count >= 0 && (\n          <span className='icon-count' onClick={handleReduceFood}>\n            -\n          </span>\n        )}\n        {count >= 0 && <span className='food-count'>{count}</span>}\n        <span className='icon-count' onClick={handleAddFood}>\n          +\n        </span>\n      </div>\n    </div>\n  )\n}, areEqual)\n","import { useReducer } from 'react'\n\nexport default function useCountChanger(initCount) {\n  if (typeof initCount !== 'number') {\n    initCount = 0\n  } else if (initCount < 0) {\n    initCount = 0\n  }\n\n  const [count, countDispatch] = useReducer(countReducer, initCount)\n\n  function countReducer(state, action) {\n    switch (action.type) {\n      case 'add':\n        return handleAddFood(state)\n      case 'reduce':\n        return handleReduceFood(state)\n      default:\n        throw new Error()\n    }\n  }\n\n  function handleAddFood(state) {\n    return state + 1\n  }\n\n  function handleReduceFood(state) {\n    // 默认商品数量不小于0\n    if (state > 0) {\n      return state - 1\n    } else {\n      return state\n    }\n  }\n\n  return {\n    count,\n    countDispatch,\n  }\n}\n","import React from 'react'\nimport './index.less'\n\nconst cartLight = 'https://s3plus.meituan.net/v1/mss_e2821d7f0cfe4ac1bf9202ecf9590e67/cdn-prod/file:9096d347/03098cb323a0263fdbbb102c696433c5.png'\nconst cartDark = 'https://s3plus.meituan.net/v1/mss_e2821d7f0cfe4ac1bf9202ecf9590e67/cdn-prod/file:9096d347/c6896f9806bdcb2399cb680fb5dec8c0.png'\n\nfunction areEqual(prevProps, nextProps) {\n  return JSON.stringify(prevProps.foodMap) === JSON.stringify(nextProps.foodMap)\n}\n\nexport default React.memo(function CartControl(props) {\n  const { foodMap = {} } = props\n\n  const foodIds = Object.keys(foodMap)\n  let foodNums = 0\n  const totalPrice = foodIds.reduce((prevSum, next) => {\n    const nextFood = foodMap[next]\n    foodNums += nextFood.count\n    return parseFloat((prevSum + nextFood.currentPrice * nextFood.count).toFixed(10))\n  }, 0)\n  return (\n    <div className='cart-control'>\n      <div className='cart'>\n        {foodNums > 0 ? <span className='cart-food-count'>{foodNums}</span> : null}\n        <img className='icon-cart' src={totalPrice > 0 ? cartLight : cartDark} alt='' />\n      </div>\n      <span className='total-price'>¥{totalPrice}</span>\n      <span className='order'>下单</span>\n    </div>\n  )\n}, areEqual)\n","var foodList = [\n  {\n    spuId: '1',\n    spuName: '琵琶腿配可乐',\n    spuDesc: '麦麦脆汁鸡（鸡腿）1块＋中可乐1杯',\n    littleImageUrl: 'http://p0.meituan.net/xianfu/4fba5f3fb77cde2892bedfd17474edc6235132.jpg',\n    currentPrice: '9.9',\n    sale: '26',\n  },\n  {\n    spuId: '2',\n    spuName: '鸡翅乐鸡双人餐',\n    spuDesc: '麦乐鸡10块＋麦辣鸡翅4块＋中杯可口可乐2杯 2*494ml',\n    littleImageUrl: 'http://p1.meituan.net/xianfu/3c6e30388128cd07bd4eb2872ef2ceb7180174.jpg',\n    currentPrice: '39.9',\n    sale: '39',\n  },\n  {\n    spuId: '3',\n    spuName: '金黄脆薯格买一送一',\n    spuDesc: '金黄脆薯格2份',\n    littleImageUrl: 'http://p0.meituan.net/xianfu/cf43f3cd2e245bb16eee4abcd56bd203181728.jpg',\n    currentPrice: '14',\n    sale: '40',\n  },\n  {\n    spuId: '4',\n    spuName: '大薯条买一送一',\n    spuDesc: '大薯条2份',\n    littleImageUrl: 'http://p0.meituan.net/xianfu/84b351d9e82f2527006dbeca5c6c446b170519.jpg',\n    currentPrice: '14',\n    sale: '100',\n  },\n  {\n    spuId: '5',\n    spuName: '摇摇薯条买一送一',\n    spuDesc: '摇摇薯条2份',\n    littleImageUrl: 'http://p0.meituan.net/xianfu/f2201c56dea074baf40dfaf91c397cf0260380.jpg',\n    currentPrice: '14',\n    sale: '100',\n  },\n  // {\n  //   spuId: \"6\",\n  //   spuName: '就爱吃鸡双人餐',\n  //   spuDesc: '麦辣鸡腿堡2个＋麦乐鸡5块＋中可乐2杯 2*494ml',\n  //   littleImageUrl: 'http://p1.meituan.net/xianfu/e23de45657c51d2fa3e7f8cf440b0a9c325862.jpg',\n  //   currentPrice: \"42\",\n  //   sale: \"90\",\n  // },\n  // {\n  //   spuId: \"7\",\n  //   spuName: '巨无霸薯条四件套',\n  //   spuDesc: '巨无霸1份＋麦辣鸡翅2块＋中薯条1份＋中可乐494ml',\n  //   littleImageUrl: 'http://p0.meituan.net/xianfu/100d9326a0bb2795e35495fad7551e0c271330.jpg',\n  //   currentPrice: \"39\",\n  //   sale: \"100\",\n  // },\n]\n\nexport default foodList\n","import { useReducer } from 'react'\n\nfunction init(initCheckedMap) {\n  for (let i in initCheckedMap) {\n    initCheckedMap[i] = { checked: initCheckedMap[i].checked }\n  }\n  return initCheckedMap\n}\n\nexport default function useCountChanger(initCheckedMap) {\n  const [checkedMap, checkedDispatch] = useReducer(checkedReducer, initCheckedMap, init)\n\n  function checkedReducer(state, action) {\n    const {\n      type,\n      payload: { id, checked, checkAll, deleteIds },\n    } = action\n    const newState = JSON.parse(JSON.stringify(state))\n    switch (type) {\n      case 'check':\n        newState[id] = {}\n        newState[id].checked = checked\n        return newState\n      case 'checkAll':\n        // newState.checkAll = checkAll\n        for (let i in newState) {\n          newState[i] = {}\n          newState[i].checked = checkAll\n        }\n        return newState\n      case 'delete':\n        if (deleteIds) {\n          deleteIds.forEach((id) => {\n            delete newState[id]\n          })\n        }\n        return newState\n      default:\n        throw new Error('Unexpected type:' + type)\n    }\n  }\n\n  return {\n    checkedMap,\n    checkedDispatch,\n  }\n}\n","import React from 'react'\nimport FoodItem from '../../components/foodItem'\nimport CartControl from '../../components/cart'\nimport foodDataConfig from '../../dataConfig.js'\nimport useFoodStatusMap from '../../Hooks/useFoodStatusMap.js'\nimport useChecked from '../../Hooks/useChecked.js'\n\nimport './index.less'\n\nfunction FoodArrayToMap(list) {\n  const foodMapData = {}\n  list.forEach((food) => {\n    foodMapData[food.spuId] = Object.assign(food, { count: 0, checked: false })\n  })\n  return foodMapData\n}\n\nexport default function Home() {\n  const { foodMap, foodStatusDispatch } = useFoodStatusMap(FoodArrayToMap(foodDataConfig))\n  const { checkedMap, checkedDispatch } = useChecked(FoodArrayToMap(foodDataConfig))\n\n  function handleDelete() {\n    const foodIds = Object.keys(foodMap)\n    const filterFoods = []\n    const deleteIds = []\n    foodIds.forEach((id) => {\n      if (foodMap[id].checked) {\n        deleteIds.push(id)\n      } else {\n        filterFoods.push(foodMap[id])\n      }\n    })\n    foodStatusDispatch({ type: 'deleteFoods', payload: { deleteIds } })\n    checkedDispatch({ type: 'delete', payload: { deleteIds } })\n  }\n  function handleReset() {\n    foodStatusDispatch({ type: 'setFoodMap', payload: { setFoodMapData: FoodArrayToMap(foodDataConfig) } })\n  }\n\n  function handleChecked(food, checked) {\n    foodStatusDispatch({ type: 'check', payload: { food, checked } })\n    checkedDispatch({ type: 'check', payload: { id: food.spuId, checked } })\n  }\n\n  function handleCheckedAll(checkAll) {\n    foodStatusDispatch({ type: 'checkAll', payload: { checkAll } })\n    checkedDispatch({ type: 'checkAll', payload: { checkAll } })\n  }\n\n  let isCheckAll = Object.keys(checkedMap).length > 0\n  for (let i in checkedMap) {\n    if (!checkedMap[i].checked) {\n      isCheckAll = false\n    }\n  }\n\n  return (\n    <div className='home-page'>\n      {Object.keys(foodMap).length !== foodDataConfig.length && (\n        <span className='init-cart' onClick={handleReset}>\n          重置购物车\n        </span>\n      )}\n      <div className='food-list'>\n        {Object.keys(foodMap).map((foodId, index) => {\n          const food = foodMap[foodId]\n          return (\n            <div className='foodItem-with-check' key={foodId}>\n              <div className='food-check-input-wrap'>\n                <input\n                  type='checkbox'\n                  className='food-check-input'\n                  checked={!!(checkedMap[food.spuId] && checkedMap[food.spuId].checked)}\n                  onChange={(e) => {\n                    handleChecked(food, e.target.checked)\n                  }}\n                />\n              </div>\n              <FoodItem className='food-item' foodData={food} foodStatusDispatch={foodStatusDispatch}></FoodItem>\n            </div>\n          )\n        })}\n        <div className='check-all'>\n          <input\n            type='checkbox'\n            className='check-all-input'\n            id='check-all'\n            checked={isCheckAll}\n            onChange={(e) => {\n              handleCheckedAll(e.target.checked)\n            }}\n          />\n          <label htmlFor='check-all'>全选</label>\n          <span className='delete' onClick={handleDelete}>\n            删除\n          </span>\n        </div>\n      </div>\n\n      <CartControl foodMap={foodMap}></CartControl>\n    </div>\n  )\n}\n","import { useReducer } from 'react'\n\nexport default function useFoodStatusMap(initFoodMap = {}) {\n  const [foodMap, foodStatusDispatch] = useReducer(foodStateChangeReducer, initFoodMap)\n\n  function foodStateChangeReducer(state, action) {\n    const {\n      type,\n      payload: { food, checked, deleteIds, checkAll, setFoodMapData },\n    } = action\n    if (!type) {\n      throw new Error(`type should not be${typeof type}`)\n    }\n    const newState = JSON.parse(JSON.stringify(state))\n    switch (type) {\n      case 'add':\n        if (newState[food.spuId]) {\n          newState[food.spuId].count++\n        } else {\n          newState[food.spuId] = Object.assign(food, { count: 1, checked: false })\n        }\n        return newState\n      case 'reduce':\n        if (newState[food.spuId]) {\n          newState[food.spuId].count--\n        }\n        return newState\n      case 'check':\n        if (newState[food.spuId]) {\n          newState[food.spuId].checked = checked\n        }\n        return newState\n      case 'checkAll':\n        for (let i in newState) {\n          newState[i].checked = checkAll\n        }\n        return newState\n      case 'deleteFoods':\n        if (deleteIds) {\n          deleteIds.forEach((id) => {\n            delete newState[id]\n          })\n        }\n        return newState\n      case 'setFoodMap':\n        return JSON.parse(JSON.stringify(setFoodMapData))\n      default:\n        throw new Error('Unexpected type:' + type)\n    }\n  }\n\n  return {\n    foodMap,\n    foodStatusDispatch,\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport Home from './pages/home/index.jsx'\nimport './common/style/reset.less'\n\nReactDOM.render(\n  <Router>\n    <Home />\n  </Router>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}