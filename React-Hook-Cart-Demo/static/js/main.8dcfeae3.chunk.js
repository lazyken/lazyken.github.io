(this["webpackJsonpshop-demo"]=this["webpackJsonpshop-demo"]||[]).push([[0],{12:function(e,c,t){e.exports=t(26)},17:function(e,c,t){},18:function(e,c,t){},19:function(e,c,t){},20:function(e,c,t){},26:function(e,c,t){"use strict";t.r(c);var a=t(0),n=t.n(a),r=t(9),o=t.n(r),s=t(11),d=t(1);t(17);var l=n.a.memo((function(e){var c=e.foodData,t=e.foodStatusDispatch;if(!c)throw new Error("check failed prop:foodData.");var r=function(e){("number"!==typeof e||e<0)&&(e=0);var c=Object(a.useReducer)((function(e,c){switch(c.type){case"add":return function(e){return e+1}(e);case"reduce":return function(e){return e>0?e-1:e}(e);default:throw new Error}}),e),t=Object(d.a)(c,2);return{count:t[0],countDispatch:t[1]}}(),o=r.count,s=r.countDispatch;return n.a.createElement("div",{className:"food-item"},console.log("render food item"),n.a.createElement("img",{className:"food-pic",src:c.littleImageUrl,alt:""}),n.a.createElement("div",{className:"food-info"},n.a.createElement("p",{className:"food-spu-dame"},c.spuName),n.a.createElement("p",{className:"food-spu-desc"},c.spuDesc),n.a.createElement("p",{className:"food-sale"},"\u6708\u552e",c.sale),n.a.createElement("p",{className:"foood-current-price"},"\xa5 ",c.currentPrice)),n.a.createElement("div",{className:"count-control"},o>=0&&n.a.createElement("span",{className:"icon-count",onClick:function(){o<1?alert("\u5546\u54c1\u6570\u91cf\u4e0d\u80fd\u5c0f\u4e8e0"):(s({type:"reduce"}),t({type:"reduce",payload:{food:c}}))}},"-"),o>=0&&n.a.createElement("span",{className:"food-count"},o),n.a.createElement("span",{className:"icon-count",onClick:function(){s({type:"add"}),t({type:"add",payload:{food:c}})}},"+")))}),(function(e,c){return JSON.stringify(e.food)===JSON.stringify(c.food)}));t(18);var u=n.a.memo((function(e){var c=e.foodMap,t=void 0===c?{}:c,a=Object.keys(t),r=0,o=a.reduce((function(e,c){var a=t[c];return r+=a.count,parseFloat((e+a.currentPrice*a.count).toFixed(10))}),0);return n.a.createElement("div",{className:"cart-control"},n.a.createElement("div",{className:"cart"},r>0?n.a.createElement("span",{className:"cart-food-count"},r):null,n.a.createElement("img",{className:"icon-cart",src:o>0?"https://s3plus.meituan.net/v1/mss_e2821d7f0cfe4ac1bf9202ecf9590e67/cdn-prod/file:9096d347/03098cb323a0263fdbbb102c696433c5.png":"https://s3plus.meituan.net/v1/mss_e2821d7f0cfe4ac1bf9202ecf9590e67/cdn-prod/file:9096d347/c6896f9806bdcb2399cb680fb5dec8c0.png",alt:""})),n.a.createElement("span",{className:"total-price"},"\xa5",o),n.a.createElement("span",{className:"order"},"\u4e0b\u5355"))}),(function(e,c){return JSON.stringify(e.foodMap)===JSON.stringify(c.foodMap)})),p=[{spuId:"1",spuName:"\u7435\u7436\u817f\u914d\u53ef\u4e50",spuDesc:"\u9ea6\u9ea6\u8106\u6c41\u9e21\uff08\u9e21\u817f\uff091\u5757\uff0b\u4e2d\u53ef\u4e501\u676f",littleImageUrl:"http://p0.meituan.net/xianfu/4fba5f3fb77cde2892bedfd17474edc6235132.jpg",currentPrice:"9.9",sale:"26"},{spuId:"2",spuName:"\u9e21\u7fc5\u4e50\u9e21\u53cc\u4eba\u9910",spuDesc:"\u9ea6\u4e50\u9e2110\u5757\uff0b\u9ea6\u8fa3\u9e21\u7fc54\u5757\uff0b\u4e2d\u676f\u53ef\u53e3\u53ef\u4e502\u676f 2*494ml",littleImageUrl:"http://p1.meituan.net/xianfu/3c6e30388128cd07bd4eb2872ef2ceb7180174.jpg",currentPrice:"39.9",sale:"39"},{spuId:"3",spuName:"\u91d1\u9ec4\u8106\u85af\u683c\u4e70\u4e00\u9001\u4e00",spuDesc:"\u91d1\u9ec4\u8106\u85af\u683c2\u4efd",littleImageUrl:"http://p0.meituan.net/xianfu/cf43f3cd2e245bb16eee4abcd56bd203181728.jpg",currentPrice:"14",sale:"40"},{spuId:"4",spuName:"\u5927\u85af\u6761\u4e70\u4e00\u9001\u4e00",spuDesc:"\u5927\u85af\u67612\u4efd",littleImageUrl:"http://p0.meituan.net/xianfu/84b351d9e82f2527006dbeca5c6c446b170519.jpg",currentPrice:"14",sale:"100"},{spuId:"5",spuName:"\u6447\u6447\u85af\u6761\u4e70\u4e00\u9001\u4e00",spuDesc:"\u6447\u6447\u85af\u67612\u4efd",littleImageUrl:"http://p0.meituan.net/xianfu/f2201c56dea074baf40dfaf91c397cf0260380.jpg",currentPrice:"14",sale:"100"}];function i(e){for(var c in e)e[c]={checked:e[c].checked};return e}t(19);function f(e){var c={};return e.forEach((function(e){c[e.spuId]=Object.assign(e,{count:0,checked:!1})})),c}function m(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=Object(a.useReducer)(o,e),t=Object(d.a)(c,2),n=t[0],r=t[1];function o(e,c){var t=c.type,a=c.payload,n=a.food,r=a.checked,o=a.deleteIds,s=a.checkAll,d=a.setFoodMapData;if(!t)throw new Error("type should not be".concat(typeof t));var l=JSON.parse(JSON.stringify(e));switch(t){case"add":return l[n.spuId]?l[n.spuId].count++:l[n.spuId]=Object.assign(n,{count:1,checked:!1}),l;case"reduce":return l[n.spuId]&&l[n.spuId].count--,l;case"check":return l[n.spuId]&&(l[n.spuId].checked=r),l;case"checkAll":for(var u in l)l[u].checked=s;return l;case"deleteFoods":return o&&o.forEach((function(e){delete l[e]})),l;case"setFoodMap":return JSON.parse(JSON.stringify(d));default:throw new Error("Unexpected type:"+t)}}return{foodMap:n,foodStatusDispatch:r}}(f(p)),c=e.foodMap,t=e.foodStatusDispatch,r=function(e){var c=Object(a.useReducer)((function(e,c){var t=c.type,a=c.payload,n=a.id,r=a.checked,o=a.checkAll,s=a.deleteIds,d=JSON.parse(JSON.stringify(e));switch(t){case"check":return d[n]={},d[n].checked=r,d;case"checkAll":for(var l in d)d[l]={},d[l].checked=o;return d;case"delete":return s&&s.forEach((function(e){delete d[e]})),d;default:throw new Error("Unexpected type:"+t)}}),e,i),t=Object(d.a)(c,2);return{checkedMap:t[0],checkedDispatch:t[1]}}(f(p)),o=r.checkedMap,s=r.checkedDispatch;var m=Object.keys(o).length>0;for(var h in o)o[h].checked||(m=!1);return n.a.createElement("div",{className:"home-page"},Object.keys(c).length!==p.length&&n.a.createElement("span",{className:"init-cart",onClick:function(){t({type:"setFoodMap",payload:{setFoodMapData:f(p)}})}},"\u91cd\u7f6e\u8d2d\u7269\u8f66"),n.a.createElement("div",{className:"food-list"},Object.keys(c).map((function(e,a){var r=c[e];return n.a.createElement("div",{className:"foodItem-with-check",key:e},n.a.createElement("div",{className:"food-check-input-wrap"},n.a.createElement("input",{type:"checkbox",className:"food-check-input",checked:!(!o[r.spuId]||!o[r.spuId].checked),onChange:function(e){!function(e,c){t({type:"check",payload:{food:e,checked:c}}),s({type:"check",payload:{id:e.spuId,checked:c}})}(r,e.target.checked)}})),n.a.createElement(l,{className:"food-item",foodData:r,foodStatusDispatch:t}))})),n.a.createElement("div",{className:"check-all"},n.a.createElement("input",{type:"checkbox",className:"check-all-input",id:"check-all",checked:m,onChange:function(e){var c;c=e.target.checked,t({type:"checkAll",payload:{checkAll:c}}),s({type:"checkAll",payload:{checkAll:c}})}}),n.a.createElement("label",{htmlFor:"check-all"},"\u5168\u9009"),n.a.createElement("span",{className:"delete",onClick:function(){var e=Object.keys(c),a=[],n=[];e.forEach((function(e){c[e].checked?n.push(e):a.push(c[e])})),t({type:"deleteFoods",payload:{deleteIds:n}}),s({type:"delete",payload:{deleteIds:n}})}},"\u5220\u9664"))),n.a.createElement(u,{foodMap:c}))}t(20);o.a.render(n.a.createElement(s.a,null,n.a.createElement(m,null)),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.8dcfeae3.chunk.js.map