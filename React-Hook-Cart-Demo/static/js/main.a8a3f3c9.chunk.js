(this["webpackJsonpshop-demo"]=this["webpackJsonpshop-demo"]||[]).push([[0],{12:function(e,c,t){e.exports=t(26)},17:function(e,c,t){},18:function(e,c,t){},19:function(e,c,t){},20:function(e,c,t){},26:function(e,c,t){"use strict";t.r(c);var a=t(0),n=t.n(a),o=t(9),r=t.n(o),s=t(11);t(17);var d=n.a.memo((function(e){var c=e.foodData,t=e.foodStatusDispatch;if(!c)throw new Error("check failed prop:foodData.");return n.a.createElement("div",{className:"food-item"},console.log("render food item"),n.a.createElement("img",{className:"food-pic",src:c.littleImageUrl,alt:""}),n.a.createElement("div",{className:"food-info"},n.a.createElement("p",{className:"food-spu-dame"},c.spuName),n.a.createElement("p",{className:"food-spu-desc"},c.spuDesc),n.a.createElement("p",{className:"food-sale"},"\u6708\u552e",c.sale),n.a.createElement("p",{className:"foood-current-price"},"\xa5 ",c.currentPrice)),n.a.createElement("div",{className:"count-control"},c.count>=0&&n.a.createElement("span",{className:"icon-count",onClick:function(){c.count<1?alert("\u5546\u54c1\u6570\u91cf\u4e0d\u80fd\u5c0f\u4e8e0"):t({type:"reduce",payload:{food:c}})}},"-"),c.count>=0&&n.a.createElement("span",{className:"food-count"},c.count),n.a.createElement("span",{className:"icon-count",onClick:function(){t({type:"add",payload:{food:c}})}},"+")))}),(function(e,c){return JSON.stringify(e.foodData)===JSON.stringify(c.foodData)}));t(18);var l=n.a.memo((function(e){var c=e.foodMap,t=void 0===c?{}:c,a=Object.keys(t),o=0,r=a.reduce((function(e,c){var a=t[c];return a.checked?(o+=a.count,parseFloat((e+a.currentPrice*a.count).toFixed(10))):parseFloat((e+0).toFixed(10))}),0);return n.a.createElement("div",{className:"cart-control"},n.a.createElement("div",{className:"cart"},o>0?n.a.createElement("span",{className:"cart-food-count"},o):null,n.a.createElement("img",{className:"icon-cart",src:r>0?"https://s3plus.meituan.net/v1/mss_e2821d7f0cfe4ac1bf9202ecf9590e67/cdn-prod/file:9096d347/03098cb323a0263fdbbb102c696433c5.png":"https://s3plus.meituan.net/v1/mss_e2821d7f0cfe4ac1bf9202ecf9590e67/cdn-prod/file:9096d347/c6896f9806bdcb2399cb680fb5dec8c0.png",alt:""})),n.a.createElement("span",{className:"total-price"},"\xa5",r),n.a.createElement("span",{className:"order"},"\u4e0b\u5355"))}),(function(e,c){return JSON.stringify(e.foodMap)===JSON.stringify(c.foodMap)})),p=[{spuId:"1",spuName:"\u7435\u7436\u817f\u914d\u53ef\u4e50",spuDesc:"\u9ea6\u9ea6\u8106\u6c41\u9e21\uff08\u9e21\u817f\uff091\u5757\uff0b\u4e2d\u53ef\u4e501\u676f",littleImageUrl:"http://p0.meituan.net/xianfu/4fba5f3fb77cde2892bedfd17474edc6235132.jpg",currentPrice:"9.9",sale:"26"},{spuId:"2",spuName:"\u9e21\u7fc5\u4e50\u9e21\u53cc\u4eba\u9910",spuDesc:"\u9ea6\u4e50\u9e2110\u5757\uff0b\u9ea6\u8fa3\u9e21\u7fc54\u5757\uff0b\u4e2d\u676f\u53ef\u53e3\u53ef\u4e502\u676f 2*494ml",littleImageUrl:"http://p1.meituan.net/xianfu/3c6e30388128cd07bd4eb2872ef2ceb7180174.jpg",currentPrice:"39.9",sale:"39"},{spuId:"3",spuName:"\u91d1\u9ec4\u8106\u85af\u683c\u4e70\u4e00\u9001\u4e00",spuDesc:"\u91d1\u9ec4\u8106\u85af\u683c2\u4efd",littleImageUrl:"http://p0.meituan.net/xianfu/cf43f3cd2e245bb16eee4abcd56bd203181728.jpg",currentPrice:"14",sale:"40"},{spuId:"4",spuName:"\u5927\u85af\u6761\u4e70\u4e00\u9001\u4e00",spuDesc:"\u5927\u85af\u67612\u4efd",littleImageUrl:"http://p0.meituan.net/xianfu/84b351d9e82f2527006dbeca5c6c446b170519.jpg",currentPrice:"14",sale:"100"},{spuId:"5",spuName:"\u6447\u6447\u85af\u6761\u4e70\u4e00\u9001\u4e00",spuDesc:"\u6447\u6447\u85af\u67612\u4efd",littleImageUrl:"http://p0.meituan.net/xianfu/f2201c56dea074baf40dfaf91c397cf0260380.jpg",currentPrice:"14",sale:"100"}],u=t(2);function i(e){for(var c in e)e[c]={checked:e[c].checked};return e}t(19);function f(e){var c={};return e.forEach((function(e){c[e.spuId]=Object.assign({count:0,checked:!1},e)})),c}function m(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=Object(a.useReducer)(r,e),t=Object(u.a)(c,2),n=t[0],o=t[1];function r(e,c){var t=c.type,a=c.payload,n=a.food,o=a.checked,r=a.deleteIds,s=a.checkAll,d=a.setFoodMapData;if(!t)throw new Error("type should not be".concat(typeof t));var l=JSON.parse(JSON.stringify(e));switch(t){case"add":return l[n.spuId]?l[n.spuId].count++:l[n.spuId]=Object.assign(n,{count:1,checked:!1}),l;case"reduce":return l[n.spuId]&&l[n.spuId].count--,l;case"check":return l[n.spuId]&&(l[n.spuId].checked=o),l;case"checkAll":for(var p in l)l[p].checked=s;return l;case"deleteFoods":return r&&r.forEach((function(e){delete l[e]})),l;case"setFoodMap":return JSON.parse(JSON.stringify(d));default:throw new Error("Unexpected type:"+t)}}return{foodMap:n,foodStatusDispatch:o}}(f(p)),c=e.foodMap,t=e.foodStatusDispatch,o=function(e){var c=Object(a.useReducer)((function(e,c){var t=c.type,a=c.payload,n=a.id,o=a.checked,r=a.checkAll,s=a.deleteIds,d=a.setCheckedMapData,l=JSON.parse(JSON.stringify(e));switch(t){case"check":return l[n]={},l[n].checked=o,l;case"checkAll":for(var p in l)l[p]={},l[p].checked=r;return l;case"delete":return s&&s.forEach((function(e){delete l[e]})),l;case"setCheckedMap":return d;default:throw new Error("Unexpected type:"+t)}}),e,i),t=Object(u.a)(c,2);return{checkedMap:t[0],checkedDispatch:t[1]}}(f(p)),r=o.checkedMap,s=o.checkedDispatch;var m=Object.keys(r).length>0;for(var h in r)r[h].checked||(m=!1);return n.a.createElement("div",{className:"home-page"},Object.keys(c).length!==p.length&&n.a.createElement("span",{className:"init-cart",onClick:function(){t({type:"setFoodMap",payload:{setFoodMapData:f(p)}}),s({type:"setCheckedMap",payload:{setCheckedMapData:f(p)}})}},"\u91cd\u7f6e\u8d2d\u7269\u8f66"),n.a.createElement("div",{className:"food-list"},Object.keys(c).map((function(e,a){var o=c[e];return n.a.createElement("div",{className:"foodItem-with-check",key:e},n.a.createElement("div",{className:"food-check-input-wrap"},n.a.createElement("input",{type:"checkbox",className:"food-check-input",checked:!(!r[o.spuId]||!r[o.spuId].checked),onChange:function(e){!function(e,c){t({type:"check",payload:{food:e,checked:c}}),s({type:"check",payload:{id:e.spuId,checked:c}})}(o,e.target.checked)}})),n.a.createElement(d,{className:"food-item",foodData:o,foodStatusDispatch:t}))})),n.a.createElement("div",{className:"check-all"},n.a.createElement("input",{type:"checkbox",className:"check-all-input",id:"check-all",checked:m,onChange:function(e){var c;c=e.target.checked,t({type:"checkAll",payload:{checkAll:c}}),s({type:"checkAll",payload:{checkAll:c}})}}),n.a.createElement("label",{htmlFor:"check-all"},"\u5168\u9009"),n.a.createElement("span",{className:"delete",onClick:function(){var e=Object.keys(c),a=[],n=[];e.forEach((function(e){c[e].checked?n.push(e):a.push(c[e])})),n.length&&(t({type:"deleteFoods",payload:{deleteIds:n}}),s({type:"delete",payload:{deleteIds:n}}))}},"\u5220\u9664"))),n.a.createElement(l,{foodMap:c}))}t(20);r.a.render(n.a.createElement(s.a,null,n.a.createElement(m,null)),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.a8a3f3c9.chunk.js.map